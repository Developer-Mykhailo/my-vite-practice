{"version":3,"file":"login.js","sources":["../src/js/refs.js","../src/js/storage.js","../src/js/login.js"],"sourcesContent":["export const refs = {\n  form: document.querySelector('.login-form'),\n  inputEmail: document.querySelector(\"[name='email']\"),\n  inputPassword: document.querySelector(\"[name='password']\"),\n  buttonfirst: document.querySelector('.login-form button'),\n  taskForm: document.querySelector('.task-form'),\n  taskList: document.querySelector('#task-list'),\n};\n","export function saveInLs(key, data) {\n  localStorage.setItem(key, JSON.stringify(data));\n}\n\nexport function getFromLs(key) {\n  const savedData = localStorage.getItem(key);\n  if (savedData) {\n    return JSON.parse(savedData);\n  }\n  return null;\n}\n\nexport function removeFromLs(key) {\n  localStorage.removeItem(key);\n}\n","// Перед вами форма для авторизації на сайті (правильні дані для входу збережені в обʼєкті USER_DATA)\n\n// Розбийте код на кілька файлів:\n// storage.js - функції для роботи зі сховищем;\n// refs.js - посилання на всі потрібні елементи в html;\n// main.js - головний файл, де вся основна логіка додатка.\n\n// Ви маєте додати перевірку введених даних при сабміті:\n// Якщо введені дані не збігаються зі збереженими, викликайте аlert і\n// повідомляйте про помилку.\n// Якщо імейл і пароль користувача збігаються, зберігайте дані з форми\n// у локальне сховище і змінюйте кнопку Login на Logout, також робіть поля введення\n// недоступними для змін.\n\n// При перезавантаженні сторінки, якщо користувач авторизован, ми маємо бачити logout-кнопку\n// та недоступні для зміни поля з даними користувача.\n// Клік по кнопці logout повертає все до початкового вигляду і видаляє дані користувача\n// з локального сховища.\n\nimport { refs } from './refs';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { saveInLs, getFromLs, removeFromLs } from './storage';\n\nconst USER_DATA = {\n  email: 'user@mail.com',\n  password: 'secret',\n};\n\nconst LS_KEY = 'user-data';\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  if (refs.buttonfirst.textContent === 'Logout') {\n    refs.form.reset();\n    refs.buttonfirst.textContent = 'Login';\n    refs.inputEmail.removeAttribute('readonly');\n    refs.inputPassword.removeAttribute('readonly');\n    removeFromLs(LS_KEY);\n    return;\n  }\n\n  const emailValue = event.target.elements.email.value.trim();\n  const passwordValue = event.target.elements.password.value.trim();\n\n  if (!emailValue || !passwordValue) {\n    iziToast.warning({\n      message: 'You have to fill all fields',\n      position: 'center',\n    });\n    return;\n  }\n\n  if (emailValue !== USER_DATA.email || passwordValue !== USER_DATA.password) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Invalid Data',\n      position: 'center',\n    });\n    return;\n  }\n\n  saveInLs(LS_KEY, { email: emailValue, password: passwordValue });\n  refs.buttonfirst.textContent = 'Logout';\n  refs.inputEmail.setAttribute('readonly', true);\n  refs.inputPassword.setAttribute('readonly', true);\n}\n\nconst savedData = getFromLs(LS_KEY);\nif (savedData) {\n  refs.inputEmail.value = savedData.email || '';\n  refs.inputPassword.value = savedData.password || '';\n  refs.buttonfirst.textContent = 'Logout';\n  refs.inputEmail.setAttribute('readonly', true);\n  refs.inputPassword.setAttribute('readonly', true);\n}\n"],"names":["refs","saveInLs","key","data","getFromLs","savedData","removeFromLs","USER_DATA","LS_KEY","onFormSubmit","event","emailValue","passwordValue","iziToast"],"mappings":"wIAAO,MAAMA,EAAO,CAClB,KAAM,SAAS,cAAc,aAAa,EAC1C,WAAY,SAAS,cAAc,gBAAgB,EACnD,cAAe,SAAS,cAAc,mBAAmB,EACzD,YAAa,SAAS,cAAc,oBAAoB,EACxD,SAAU,SAAS,cAAc,YAAY,EAC7C,SAAU,SAAS,cAAc,YAAY,CAC/C,ECPO,SAASC,EAASC,EAAKC,EAAM,CAClC,aAAa,QAAQD,EAAK,KAAK,UAAUC,CAAI,CAAC,CAChD,CAEO,SAASC,EAAUF,EAAK,CAC7B,MAAMG,EAAY,aAAa,QAAQH,CAAG,EAC1C,OAAIG,EACK,KAAK,MAAMA,CAAS,EAEtB,IACT,CAEO,SAASC,EAAaJ,EAAK,CAChC,aAAa,WAAWA,CAAG,CAC7B,CCUA,MAAMK,EAAY,CAChB,MAAO,gBACP,SAAU,QACZ,EAEMC,EAAS,YAEfR,EAAK,KAAK,iBAAiB,SAAUS,CAAY,EAEjD,SAASA,EAAaC,EAAO,CAG3B,GAFAA,EAAM,eAAc,EAEhBV,EAAK,YAAY,cAAgB,SAAU,CAC7CA,EAAK,KAAK,QACVA,EAAK,YAAY,YAAc,QAC/BA,EAAK,WAAW,gBAAgB,UAAU,EAC1CA,EAAK,cAAc,gBAAgB,UAAU,EAC7CM,EAAaE,CAAM,EACnB,MACD,CAED,MAAMG,EAAaD,EAAM,OAAO,SAAS,MAAM,MAAM,OAC/CE,EAAgBF,EAAM,OAAO,SAAS,SAAS,MAAM,OAE3D,GAAI,CAACC,GAAc,CAACC,EAAe,CACjCC,EAAS,QAAQ,CACf,QAAS,8BACT,SAAU,QAChB,CAAK,EACD,MACD,CAED,GAAIF,IAAeJ,EAAU,OAASK,IAAkBL,EAAU,SAAU,CAC1EM,EAAS,MAAM,CACb,MAAO,QACP,QAAS,eACT,SAAU,QAChB,CAAK,EACD,MACD,CAEDZ,EAASO,EAAQ,CAAE,MAAOG,EAAY,SAAUC,CAAa,CAAE,EAC/DZ,EAAK,YAAY,YAAc,SAC/BA,EAAK,WAAW,aAAa,WAAY,EAAI,EAC7CA,EAAK,cAAc,aAAa,WAAY,EAAI,CAClD,CAEA,MAAMK,EAAYD,EAAUI,CAAM,EAC9BH,IACFL,EAAK,WAAW,MAAQK,EAAU,OAAS,GAC3CL,EAAK,cAAc,MAAQK,EAAU,UAAY,GACjDL,EAAK,YAAY,YAAc,SAC/BA,EAAK,WAAW,aAAa,WAAY,EAAI,EAC7CA,EAAK,cAAc,aAAa,WAAY,EAAI"}